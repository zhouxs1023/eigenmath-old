\documentclass[11pt]{article}
\title{Eigenmath Manual}
%\author{George Weigt}
\date{\today}
\usepackage{graphicx}
\usepackage{makeidx}
\makeindex

\begin{document}

\maketitle

\newpage

\include{syntax}

\newpage

\include{nabokov}

\include{avogadro}

\include{zerozero}

\section*{Geometric series}

A geometric series converges according to the formula
$$\sum_{k=0}^\infty a^k={1\over1-a},\qquad|a|<1$$
If we use $a=-1/2$ and for practical purposes only count up to nine instead of infinity,
we should have
$$\sum_{k=0}^9\left(-{1\over2}\right)^k\approx{2\over3}$$
The above calculation can be done in one line of code using the $sum$ function.

\medskip
\verb$sum(k,0,9,(-0.5)^k)$
$$0.666016$$

\medskip
\noindent
The following example uses an intermediate variable.

\medskip
\verb$f=sum(k,0,9,a^k)$

\verb$f$
$$f=1+a+a^2+a^3+a^4+a^5+a^6+a^7+a^8+a^9$$

\verb$eval(f,a,-1/2)$
$$341\over512$$

\verb$float(last)$
$$0.666016$$

\medskip
\noindent
As seen on the first line, no result is printed when a symbol is defined.
When you do in fact want to see the value of a symbol,
just enter it as shown on the second line.

\medskip
\noindent
When a result is displayed, it is also stored in the symbol $last$.

\newpage

\noindent
The following example shows how to define a function.

\medskip
\verb$f(a)=sum(k,0,9,a^k)$

\verb$f$
$$f=\mathop{\rm sum}(k,0,9,a^k)$$

\verb$f(-1/2)$
$$341\over512$$

\verb$f(-0.5)$
$$0.666016$$

\medskip
\noindent
Eigenmath handles function definitions in a special way.
Unlike a normal symbol, a function definition is not evaluated immediately.
The following example demonstrates the difference.

\medskip
\verb$f=sum(k,0,9,a^k)$

\verb$f$
$$f=1+a+a^2+a^3+a^4+a^5+a^6+a^7+a^8+a^9$$

\verb$f(a)=sum(k,0,9,a^k)$

\verb$f$
$$f=\mathop{\rm sum}(k,0,9,a^k)$$

\medskip
\noindent
Why are they handled differently?
Well, suppose we want to define $f$ as a function of two variables,
$a$ and $n$, like this.

\medskip
\verb$f(a,n)=sum(k,0,n,a^k)$

\medskip
\noindent
In this case it is not possible to evaluate the sum right away.
The value of $n$ will not be known until $f$ is actually used somewhere.
Consequently, Eigenmath does not normally evaluate a function when it is defined.
Now, having said that, there are two work arounds that provide exceptions to the rule.
They are {\it eval} and {\it quote}.
 
\medskip
\verb$f=quote(sum(k,0,9,a^k))$

\verb$f$
$$f=\mathop{\rm sum}(k,0,9,a^k)$$

\verb$f(a)=eval(sum(k,0,9,a^k))$

\verb$f$
$$f=1+a+a^2+a^3+a^4+a^5+a^6+a^7+a^8+a^9$$




\section*{Units of measure}
\index{units of measure}
Quoted strings can be used to express units of measurement in a calculation.
For example, the space shuttle accelerates from zero to
17{,}000 miles per hour in 8 minutes.
The average acceleration of the space shuttle is

\medskip
\verb$v=17000*"mile"/"hr"$

\verb$t=8*"min"/(60*"min"/"hr")$

\verb$v/t$

$$\hbox{127500 mile}\over(\hbox{hr})^2$$

\include{scripting}

\newpage

%\input{draw.tex}

\newpage

\index{draw}

\noindent
$draw(f,x)$ draws a graph of the function $f$ of $x$.
The second argument can be omitted when the dependent variable
is literally $x$ or $t$.
The vectors $xrange$ and $yrange$ control the scale of the graph.

\medskip
\verb$draw(x^2)$

\medskip
\begin{center}
\includegraphics[scale=0.4]{parabola.png}
\end{center}

\verb$xrange=(-1,1)$

\verb$yrange=(0,2)$

\verb$draw(x^2)$

\medskip
\begin{center}
\includegraphics[scale=0.4]{parabola2.png}
\end{center}

\verb$clear$

\medskip
\noindent
The clear command (or a click of the Clear button)
resets $xrange$ and $yrange$.
This needs to be done so that the next graph
appears as shown.

\newpage

\noindent
Parametric drawing occurs when a function returns a vector.
The vector $trange$ controls the parameter range.
The default range is $(-\pi,\pi)$.

\medskip
\verb$f=(cos(t),sin(t))$

\verb$draw(5*f)$

\medskip
\begin{center}
\includegraphics[scale=0.4]{circle.png}
\end{center}

\verb$trange=(0,pi/2)$

\verb$draw(5*f)$

\medskip
\begin{center}
\includegraphics[scale=0.4]{circle2.png}
\end{center}

\newpage

\noindent
Here are a couple of interesting curves and the code for drawing them.
First is a lemniscate.

\medskip
\verb$clear$

\verb$X=cos(t)/(1+sin(t)^2)$

\verb$Y=sin(t)*cos(t)/(1+sin(t)^2)$

\verb$draw(5*(X,Y))$

\medskip
\begin{center}
\includegraphics[scale=0.4]{lemniscate.png}
\end{center}

\medskip
\noindent
Next is a cardioid.

\medskip
\verb$r=(1+cos(t))/2$

\verb$u=(cos(t),sin(t))$

\verb$xrange=(-1,1)$

\verb$yrange=(-1,1)$

\verb$draw(r*u)$

\medskip
\begin{center}
\includegraphics[scale=0.4]{cardioid.png}
\end{center}

\newpage

\index{linear algebra}

\noindent
$dot$ is used to multiply vectors and matrices.
The following example shows how to use $dot$ and $inv$ to solve for
$\bf X$ in $\bf AX=B$.

\medskip
{\tt A=((3.8,7.2),(1.3,-0.9))}

{\tt B=(16.5,-22.1)}

{\tt X=dot(inv(A),B)}

{\tt X}

$$\left(\matrix{-11.2887\cr8.24961}\right)$$

\medskip
\noindent
One might wonder why the $dot$ function is necessary.
Why not simply use $X=inv(A)*B$ like scalar multiplication?
The reason is that the software normally reorders factors internally to optimize processing.
For example, $inv(A)*B$ in symbolic form is changed to $B*inv(A)$ internally.
Since the dot product is not commutative, this reordering would give the wrong result.
Using a function to do the multiply avoids the problem because
function arguments are not reordered.

\medskip
\noindent
It should be noted that $dot$ can have more than two arguments.
For example, $dot(A,B,C)$ can be used for the dot product of three tensors.

\newpage

\noindent
The following example demonstrates the relation
${\bf A}^{-1}=\mathop{\rm adj}{\bf A}/\mathop{\rm det}{\bf A}$.

\medskip
\verb$A=((a,b),(c,d))$

\medskip
\verb$inv(A)$
$$\left(\matrix{
\displaystyle{d\over ad-bc} & \displaystyle{-{b\over ad-bc}}\cr
\cr
\displaystyle{-{c\over ad-bc}} & \displaystyle{a\over ad-bc}\cr
}\right)$$

\medskip
\verb$adj(A)$
$$\left(\matrix{
d & -b\cr
-c & a\cr
}\right)$$

\medskip
\verb$det(A)$
$$ad-bc$$

\medskip
\verb$inv(A)-adj(A)/det(A)$
$$\left(\matrix{
0 & 0\cr
0 & 0\cr
}\right)$$

\medskip
\noindent
Sometimes a calculation will be simpler if it can be reorganized to use $adj$ instead of $inv$.
The main idea is to try to prevent the determinant from appearing as a divisor.
For example, suppose for matrices $\bf A$ and $\bf B$ you want to check that
$${\bf A}-{\bf B}^{-1}=0$$
Depending on the complexity of $\mathop{\rm det}\bf B$, the software
may not be able to find a simplification that yields zero.
Should that occur, the following alternative can be tried.
$$(\mathop{\rm det}{\bf B})\cdot{\bf A}-\mathop{\rm adj}{\bf B}=0$$

\newpage

\noindent
The adjunct of a matrix is related to the cofactors as follows.

\medskip
\verb$A=((a,b),(c,d))$

\verb$C=((0,0),(0,0))$

\verb$C[1,1]=cofactor(A,1,1)$

\verb$C[1,2]=cofactor(A,1,2)$

\verb$C[2,1]=cofactor(A,2,1)$

\verb$C[2,2]=cofactor(A,2,2)$

\verb$C$

$$C=\left(\matrix{d&-c\cr -b&a}\right)$$

\verb$adj(A)-transpose(C)$

$$\left(\matrix{0&0\cr0&0\cr}\right)$$

\include{complex}

\newpage

\index{derivative}

\noindent
$d(f,x)$ returns the derivative of $f$ with respect to $x$.
The $x$ can be omitted for expressions in $x$.

\medskip
\verb$d(x^2)$
$$2x$$

\bigskip
\noindent
The following table summarizes the various ways to obtain multiderivatives.

\begin{center}
\begin{tabular}{cllllll}
%& & & & {\it alternate form} \\
%\\
$\displaystyle{\partial^2f\over\partial x^2}$ & & \verb$d(f,x,x)$ & & \verb$d(f,x,2)$ \\
\\
$\displaystyle{\partial^2f\over\partial x\,\partial y}$ & & \verb$d(f,x,y)$ \\
\\
$\displaystyle{\partial^{m+n+\cdot\cdot\cdot} f\over\partial x^m\,\partial y^n\cdots}$ & &
\verb$d(f,x,...,y,...)$ & & \verb$d(f,x,m,y,n,...)$ \\
\end{tabular}
\end{center}

%\medskip
%\verb$r=sqrt(x^2+y^2)$

%\verb$d(r,x,y)$
%$${-{xy\over(x^2+y^2)^{3/2}}}$$

\index{gradient}

\noindent
The gradient of $f$ is obtained by using a vector for $x$ in $d(f,x)$.

\medskip
\verb$r=sqrt(x^2+y^2)$

\verb$d(r,(x,y))$
$$\left(\matrix{
\displaystyle{{x\over(x^2+y^2)^{1/2}}}\cr
\cr
\displaystyle{{y\over(x^2+y^2)^{1/2}}}\cr
}\right)$$

\medskip
\noindent
The $f$ in $d(f,x)$ can be a tensor function.
Gradient raises the rank by one.

\medskip
\verb$F=(x+2y,3x+4y)$

\verb$X=(x,y)$

\verb$d(F,X)$
$$\left(\matrix{1&2\cr3&4}\right)$$

\newpage

\noindent
The function $f$ in $d(f)$ does not have to be defined.
It can be a template function with just a name and an argument list.
Eigenmath checks the argument list to figure out what to do.
For example, $d(f(x),x)$ evaluates to itself because $f$ depends on $x$.
However, $d(f(x),y)$ evaluates to zero because $f$ does not depend on $y$.

\medskip
\verb$d(f(x),x)$
$$\partial(f(x),x)$$

\verb$d(f(x),y)$
$$0$$

\verb$d(f(x,y),y)$
$$\partial(f(x,y),y)$$

\verb$d(f(),t)$
$$\partial(f(),t)$$

\medskip
\noindent
As the final example shows, an empty argument list causes
$d(f)$ to always evaluate to itself, regardless
of the second argument.

\medskip
\noindent
Template functions are useful for experimenting with differential forms.
For example, let us check the identity
$$\mathop{\rm div}(\mathop{\rm curl}{\bf F})=0$$
for an arbitrary vector function $\bf F$.

\medskip
\verb$F=(F1(x,y,z),F2(x,y,z),F3(x,y,z))$

\verb$curl(U)=(d(U[3],y)-d(U[2],z),d(U[1],z)-d(U[3],x),d(U[2],x)-d(U[1],y))$

\verb$div(U)=d(U[1],x)+d(U[2],y)+d(U[3],z)$

\verb$div(curl(F))$
$$0$$

\newpage

\index{integral}

\noindent
$integral(f,x)$ returns the integral of $f$ with respect to $x$.
The $x$ can be omitted for expressions in $x$.
A multi-integral can be obtained by extending the argument list.

\medskip
\verb$integral(x^2)$
$${1\over3}x^3$$

\verb$integral(x*y,x,y)$
$${1\over4}x^2y^2$$

\medskip
\noindent
$defint(f,x,a,b,\ldots)$
computes the definite integral of $f$ with respect to $x$ evaluated from $a$ to $b$.
The argument list can be extended for multiple integrals.

\medskip
\noindent
The following example computes the integral of $f=x^2$
over the domain of a semicircle.
For each $x$ along the abscissa, $y$ ranges from 0 to $\sqrt{1-x^2}$.

\medskip
\verb$defint(x^2,y,0,sqrt(1-x^2),x,-1,1)$

$${1\over8}\pi$$

\medskip
\noindent
As an alternative, the $eval$ function can be used to compute a definite integral step by step.

\medskip
\verb$I=integral(x^2,y)$

\verb$I=eval(I,y,sqrt(1-x^2))-eval(I,y,0)$

\verb$I=integral(I,x)$

\verb$eval(I,x,1)-eval(I,x,-1)$
$${1\over8}\pi$$

\include{integral-trick}

\include{fund-thm-of-calculus}

\include{line-integral}

\include{surface-area}

\include{surface-integral}

\include{greens-theorem}

\include{stokes-theorem}

\include{francois-viete}

\include{example2}

\include{example3}

\include{example4}

\include{space-shuttle-and-corvette}

\newpage

\include{list-of-functions}

\printindex
\end{document}
